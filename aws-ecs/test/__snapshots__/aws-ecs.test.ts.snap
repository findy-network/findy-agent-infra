// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`Pipeline Stack 1`] = `
Object {
  "Resources": Object {
    "BuildProjectRole0E170066": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codebuild.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/AmazonEC2ContainerRegistryPowerUser",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BuildProjectRoleDefaultPolicyE4352B8B": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:us-east-1:123456789:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "CIPipelineStackCIPipelineImagePipelinePushImages49C7219A",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:us-east-1:123456789:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "CIPipelineStackCIPipelineImagePipelinePushImages49C7219A",
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "codebuild:CreateReportGroup",
                "codebuild:CreateReport",
                "codebuild:UpdateReport",
                "codebuild:BatchPutTestCases",
                "codebuild:BatchPutCodeCoverages",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codebuild:us-east-1:123456789:report-group/",
                    Object {
                      "Ref": "CIPipelineStackCIPipelineImagePipelinePushImages49C7219A",
                    },
                    "-*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BuildProjectRoleDefaultPolicyE4352B8B",
        "Roles": Array [
          Object {
            "Ref": "BuildProjectRole0E170066",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "CIPipelineStackCIPipeline130AC4E6": Object {
      "DependsOn": Array [
        "CIPipelineStackCIPipelineRoleDefaultPolicy6E9FE7AA",
        "CIPipelineStackCIPipelineRole5B66F3FB",
      ],
      "Properties": Object {
        "ArtifactStore": Object {
          "EncryptionKey": Object {
            "Id": Object {
              "Fn::GetAtt": Array [
                "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
                "Arn",
              ],
            },
            "Type": "KMS",
          },
          "Location": Object {
            "Ref": "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
          },
          "Type": "S3",
        },
        "Name": "CIPipelineStackCIPipeline",
        "RestartExecutionOnUpdate": true,
        "RoleArn": Object {
          "Fn::GetAtt": Array [
            "CIPipelineStackCIPipelineRole5B66F3FB",
            "Arn",
          ],
        },
        "Stages": Array [
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Source",
                  "Owner": "AWS",
                  "Provider": "CodeStarSourceConnection",
                  "Version": "1",
                },
                "Configuration": Object {
                  "BranchName": "master",
                  "ConnectionArn": "githubConnectionArn",
                  "FullRepositoryId": "findy-network/findy-agent",
                },
                "Name": "checkout-findy-agent",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_checkout-findy-agent",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineSourcecheckoutfindyagentCodePipelineActionRole916FDA26",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Source",
                  "Owner": "AWS",
                  "Provider": "CodeStarSourceConnection",
                  "Version": "1",
                },
                "Configuration": Object {
                  "BranchName": "master",
                  "ConnectionArn": "githubConnectionArn",
                  "FullRepositoryId": "findy-network/findy-agent-auth",
                },
                "Name": "checkout-findy-agent-auth",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_checkout-findy-agent-auth",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineSourcecheckoutfindyagentauthCodePipelineActionRole7E18AD27",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Source",
                  "Owner": "AWS",
                  "Provider": "CodeStarSourceConnection",
                  "Version": "1",
                },
                "Configuration": Object {
                  "BranchName": "master",
                  "ConnectionArn": "githubConnectionArn",
                  "FullRepositoryId": "findy-network/findy-agent-vault",
                },
                "Name": "checkout-findy-agent-vault",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_checkout-findy-agent-vault",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineSourcecheckoutfindyagentvaultCodePipelineActionRoleD62034E4",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Source",
                  "Owner": "AWS",
                  "Provider": "CodeStarSourceConnection",
                  "Version": "1",
                },
                "Configuration": Object {
                  "BranchName": "master",
                  "ConnectionArn": "githubConnectionArn",
                  "FullRepositoryId": "findy-network/findy-wallet-pwa",
                },
                "Name": "checkout-findy-wallet-pwa",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_checkout-findy-wallet-pwa",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineSourcecheckoutfindywalletpwaCodePipelineActionRole5E6968AD",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Source",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "CIPipelineStackCIPipelineImagePipelinePushImages49C7219A",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_checkout-findy-wallet-pwa",
                  },
                ],
                "Name": "CIPipelineStackCIPipelineImagePipelinePushImages",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Build_CIPipelineStackCIPipelineImagePipelinePushImages",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineBuildCIPipelineStackCIPipelineImagePipelinePushImagesCodePipelineActionRole1CF67DE7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "CIPipelineStackPWAPipelineBuild20706257",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_checkout-findy-wallet-pwa",
                  },
                ],
                "Name": "CIPipelineStackPWAPipelineBuild",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Build_CIPipelineStackPWAPipelineBuild",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineBuildCIPipelineStackPWAPipelineBuildCodePipelineActionRoleBFEFEA69",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Build",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "CIPipelineStackPWAPipelineDeploy9302B6C7",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Build_CIPipelineStackPWAPipelineBuild",
                  },
                ],
                "Name": "CIPipelineStackPWAPipelineDeploy",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineDeployCIPipelineStackPWAPipelineDeployCodePipelineActionRole74FDF9C7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Deploy",
          },
        ],
      },
      "Type": "AWS::CodePipeline::Pipeline",
    },
    "CIPipelineStackCIPipelineArtifactsBucketA5EE3009": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "KMSMasterKeyID": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
                    "Arn",
                  ],
                },
                "SSEAlgorithm": "aws:kms",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "KeyPolicy": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "kms:Create*",
                "kms:Describe*",
                "kms:Enable*",
                "kms:List*",
                "kms:Put*",
                "kms:Update*",
                "kms:Revoke*",
                "kms:Disable*",
                "kms:Get*",
                "kms:Delete*",
                "kms:ScheduleKeyDeletion",
                "kms:CancelKeyDeletion",
                "kms:GenerateDataKey",
                "kms:TagResource",
                "kms:UntagResource",
              ],
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789:root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineRole5B66F3FB",
                    "Arn",
                  ],
                },
              },
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineSourcecheckoutfindyagentCodePipelineActionRole916FDA26",
                    "Arn",
                  ],
                },
              },
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineSourcecheckoutfindyagentauthCodePipelineActionRole7E18AD27",
                    "Arn",
                  ],
                },
              },
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineSourcecheckoutfindyagentvaultCodePipelineActionRoleD62034E4",
                    "Arn",
                  ],
                },
              },
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineSourcecheckoutfindywalletpwaCodePipelineActionRole5E6968AD",
                    "Arn",
                  ],
                },
              },
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::GetAtt": Array [
                    "BuildProjectRole0E170066",
                    "Arn",
                  ],
                },
              },
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::GetAtt": Array [
                    "BuildProjectRole0E170066",
                    "Arn",
                  ],
                },
              },
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackPWAPipelineBuildRole636BAD3A",
                    "Arn",
                  ],
                },
              },
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackPWAPipelineBuildRole636BAD3A",
                    "Arn",
                  ],
                },
              },
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackPWAPipelineDeployRole3E6DE9E5",
                    "Arn",
                  ],
                },
              },
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackPWAPipelineDeployRole3E6DE9E5",
                    "Arn",
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "CIPipelineStackCIPipelineArtifactsBucketEncryptionKeyAliasFF47CA03": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AliasName": "alias/codepipeline-cipipelinecipipelinestackcipipelinea94af634",
        "TargetKeyId": Object {
          "Fn::GetAtt": Array [
            "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
            "Arn",
          ],
        },
      },
      "Type": "AWS::KMS::Alias",
      "UpdateReplacePolicy": "Delete",
    },
    "CIPipelineStackCIPipelineBuildCIPipelineStackCIPipelineImagePipelinePushImagesCodePipelineActionRole1CF67DE7": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "CIPipelineStackCIPipelineBuildCIPipelineStackCIPipelineImagePipelinePushImagesCodePipelineActionRoleDefaultPolicyF0AF912F": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineImagePipelinePushImages49C7219A",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "CIPipelineStackCIPipelineBuildCIPipelineStackCIPipelineImagePipelinePushImagesCodePipelineActionRoleDefaultPolicyF0AF912F",
        "Roles": Array [
          Object {
            "Ref": "CIPipelineStackCIPipelineBuildCIPipelineStackCIPipelineImagePipelinePushImagesCodePipelineActionRole1CF67DE7",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "CIPipelineStackCIPipelineBuildCIPipelineStackPWAPipelineBuildCodePipelineActionRoleBFEFEA69": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "CIPipelineStackCIPipelineBuildCIPipelineStackPWAPipelineBuildCodePipelineActionRoleDefaultPolicy8C45F499": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackPWAPipelineBuild20706257",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "CIPipelineStackCIPipelineBuildCIPipelineStackPWAPipelineBuildCodePipelineActionRoleDefaultPolicy8C45F499",
        "Roles": Array [
          Object {
            "Ref": "CIPipelineStackCIPipelineBuildCIPipelineStackPWAPipelineBuildCodePipelineActionRoleBFEFEA69",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "CIPipelineStackCIPipelineDeployCIPipelineStackPWAPipelineDeployCodePipelineActionRole74FDF9C7": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "CIPipelineStackCIPipelineDeployCIPipelineStackPWAPipelineDeployCodePipelineActionRoleDefaultPolicyD1F86EA6": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackPWAPipelineDeploy9302B6C7",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "CIPipelineStackCIPipelineDeployCIPipelineStackPWAPipelineDeployCodePipelineActionRoleDefaultPolicyD1F86EA6",
        "Roles": Array [
          Object {
            "Ref": "CIPipelineStackCIPipelineDeployCIPipelineStackPWAPipelineDeployCodePipelineActionRole74FDF9C7",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "CIPipelineStackCIPipelineImagePipelinePushImages49C7219A": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:1.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": true,
          "Type": "LINUX_CONTAINER",
        },
        "Name": "CIPipelineStackCIPipelineImagePipelinePushImages",
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "BuildProjectRole0E170066",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": Object {
            "Fn::Join": Array [
              "",
              Array [
                "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"build\\": {
      \\"commands\\": [
        \\"aws ecr get-login-password --region $AWS_DEFAULT_REGION | docker login --username AWS --password-stdin 123456789.dkr.ecr.us-east-1.amazonaws.com\\",
        \\"docker pull ghcr.io/findy-network/findy-agent:latest\\\\ndocker tag ghcr.io/findy-network/findy-agent:latest ",
                Object {
                  "Fn::Select": Array [
                    4,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "agent45A49129",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".dkr.ecr.",
                Object {
                  "Fn::Select": Array [
                    3,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "agent45A49129",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".",
                Object {
                  "Ref": "AWS::URLSuffix",
                },
                "/",
                Object {
                  "Ref": "agent45A49129",
                },
                ":latest\\\\ndocker push ",
                Object {
                  "Fn::Select": Array [
                    4,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "agent45A49129",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".dkr.ecr.",
                Object {
                  "Fn::Select": Array [
                    3,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "agent45A49129",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".",
                Object {
                  "Ref": "AWS::URLSuffix",
                },
                "/",
                Object {
                  "Ref": "agent45A49129",
                },
                ":latest\\",
        \\"docker pull ghcr.io/findy-network/findy-agent-auth:latest\\\\ndocker tag ghcr.io/findy-network/findy-agent-auth:latest ",
                Object {
                  "Fn::Select": Array [
                    4,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "auth6E544AA8",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".dkr.ecr.",
                Object {
                  "Fn::Select": Array [
                    3,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "auth6E544AA8",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".",
                Object {
                  "Ref": "AWS::URLSuffix",
                },
                "/",
                Object {
                  "Ref": "auth6E544AA8",
                },
                ":latest\\\\ndocker push ",
                Object {
                  "Fn::Select": Array [
                    4,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "auth6E544AA8",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".dkr.ecr.",
                Object {
                  "Fn::Select": Array [
                    3,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "auth6E544AA8",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".",
                Object {
                  "Ref": "AWS::URLSuffix",
                },
                "/",
                Object {
                  "Ref": "auth6E544AA8",
                },
                ":latest\\",
        \\"docker pull ghcr.io/findy-network/findy-agent-vault:latest\\\\ndocker tag ghcr.io/findy-network/findy-agent-vault:latest ",
                Object {
                  "Fn::Select": Array [
                    4,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "vaultAEB7ADF6",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".dkr.ecr.",
                Object {
                  "Fn::Select": Array [
                    3,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "vaultAEB7ADF6",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".",
                Object {
                  "Ref": "AWS::URLSuffix",
                },
                "/",
                Object {
                  "Ref": "vaultAEB7ADF6",
                },
                ":latest\\\\ndocker push ",
                Object {
                  "Fn::Select": Array [
                    4,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "vaultAEB7ADF6",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".dkr.ecr.",
                Object {
                  "Fn::Select": Array [
                    3,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "vaultAEB7ADF6",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".",
                Object {
                  "Ref": "AWS::URLSuffix",
                },
                "/",
                Object {
                  "Ref": "vaultAEB7ADF6",
                },
                ":latest\\",
        \\"printf '[{\\\\\\"name\\\\\\":\\\\\\"CIPipelineStackAgentContainer\\\\\\",\\\\\\"imageUri\\\\\\":\\\\\\"",
                Object {
                  "Fn::Select": Array [
                    4,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "agent45A49129",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".dkr.ecr.",
                Object {
                  "Fn::Select": Array [
                    3,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "agent45A49129",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".",
                Object {
                  "Ref": "AWS::URLSuffix",
                },
                "/",
                Object {
                  "Ref": "agent45A49129",
                },
                ":latest\\\\\\"},{\\\\\\"name\\\\\\":\\\\\\"CIPipelineStackAuthContainer\\\\\\",\\\\\\"imageUri\\\\\\":\\\\\\"",
                Object {
                  "Fn::Select": Array [
                    4,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "auth6E544AA8",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".dkr.ecr.",
                Object {
                  "Fn::Select": Array [
                    3,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "auth6E544AA8",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".",
                Object {
                  "Ref": "AWS::URLSuffix",
                },
                "/",
                Object {
                  "Ref": "auth6E544AA8",
                },
                ":latest\\\\\\"},{\\\\\\"name\\\\\\":\\\\\\"CIPipelineStackVaultContainer\\\\\\",\\\\\\"imageUri\\\\\\":\\\\\\"",
                Object {
                  "Fn::Select": Array [
                    4,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "vaultAEB7ADF6",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".dkr.ecr.",
                Object {
                  "Fn::Select": Array [
                    3,
                    Object {
                      "Fn::Split": Array [
                        ":",
                        Object {
                          "Fn::GetAtt": Array [
                            "vaultAEB7ADF6",
                            "Arn",
                          ],
                        },
                      ],
                    },
                  ],
                },
                ".",
                Object {
                  "Ref": "AWS::URLSuffix",
                },
                "/",
                Object {
                  "Ref": "vaultAEB7ADF6",
                },
                ":latest\\\\\\"}]' > imagedefinitions.json\\"
      ]
    }
  },
  \\"artifacts\\": {
    \\"files\\": \\"imagedefinitions.json\\"
  }
}",
              ],
            ],
          },
          "Type": "CODEPIPELINE",
        },
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "CIPipelineStackCIPipelineRole5B66F3FB": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codepipeline.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "CIPipelineStackCIPipelineRoleDefaultPolicy6E9FE7AA": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineSourcecheckoutfindyagentCodePipelineActionRole916FDA26",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineSourcecheckoutfindyagentauthCodePipelineActionRole7E18AD27",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineSourcecheckoutfindyagentvaultCodePipelineActionRoleD62034E4",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineSourcecheckoutfindywalletpwaCodePipelineActionRole5E6968AD",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineBuildCIPipelineStackCIPipelineImagePipelinePushImagesCodePipelineActionRole1CF67DE7",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineBuildCIPipelineStackPWAPipelineBuildCodePipelineActionRoleBFEFEA69",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineDeployCIPipelineStackPWAPipelineDeployCodePipelineActionRole74FDF9C7",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "CIPipelineStackCIPipelineRoleDefaultPolicy6E9FE7AA",
        "Roles": Array [
          Object {
            "Ref": "CIPipelineStackCIPipelineRole5B66F3FB",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "CIPipelineStackCIPipelineSourcecheckoutfindyagentCodePipelineActionRole916FDA26": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "CIPipelineStackCIPipelineSourcecheckoutfindyagentCodePipelineActionRoleDefaultPolicy75146A19": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "codestar-connections:UseConnection",
              "Effect": "Allow",
              "Resource": "githubConnectionArn",
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "s3:PutObjectAcl",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    Object {
                      "Fn::GetAtt": Array [
                        "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                        "Arn",
                      ],
                    },
                    "/*",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "CIPipelineStackCIPipelineSourcecheckoutfindyagentCodePipelineActionRoleDefaultPolicy75146A19",
        "Roles": Array [
          Object {
            "Ref": "CIPipelineStackCIPipelineSourcecheckoutfindyagentCodePipelineActionRole916FDA26",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "CIPipelineStackCIPipelineSourcecheckoutfindyagentauthCodePipelineActionRole7E18AD27": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "CIPipelineStackCIPipelineSourcecheckoutfindyagentauthCodePipelineActionRoleDefaultPolicy317224F4": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "codestar-connections:UseConnection",
              "Effect": "Allow",
              "Resource": "githubConnectionArn",
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "s3:PutObjectAcl",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    Object {
                      "Fn::GetAtt": Array [
                        "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                        "Arn",
                      ],
                    },
                    "/*",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "CIPipelineStackCIPipelineSourcecheckoutfindyagentauthCodePipelineActionRoleDefaultPolicy317224F4",
        "Roles": Array [
          Object {
            "Ref": "CIPipelineStackCIPipelineSourcecheckoutfindyagentauthCodePipelineActionRole7E18AD27",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "CIPipelineStackCIPipelineSourcecheckoutfindyagentvaultCodePipelineActionRoleD62034E4": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "CIPipelineStackCIPipelineSourcecheckoutfindyagentvaultCodePipelineActionRoleDefaultPolicy44A1E8AB": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "codestar-connections:UseConnection",
              "Effect": "Allow",
              "Resource": "githubConnectionArn",
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "s3:PutObjectAcl",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    Object {
                      "Fn::GetAtt": Array [
                        "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                        "Arn",
                      ],
                    },
                    "/*",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "CIPipelineStackCIPipelineSourcecheckoutfindyagentvaultCodePipelineActionRoleDefaultPolicy44A1E8AB",
        "Roles": Array [
          Object {
            "Ref": "CIPipelineStackCIPipelineSourcecheckoutfindyagentvaultCodePipelineActionRoleD62034E4",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "CIPipelineStackCIPipelineSourcecheckoutfindywalletpwaCodePipelineActionRole5E6968AD": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "CIPipelineStackCIPipelineSourcecheckoutfindywalletpwaCodePipelineActionRoleDefaultPolicy75BA235E": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "codestar-connections:UseConnection",
              "Effect": "Allow",
              "Resource": "githubConnectionArn",
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "s3:PutObjectAcl",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    Object {
                      "Fn::GetAtt": Array [
                        "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                        "Arn",
                      ],
                    },
                    "/*",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "CIPipelineStackCIPipelineSourcecheckoutfindywalletpwaCodePipelineActionRoleDefaultPolicy75BA235E",
        "Roles": Array [
          Object {
            "Ref": "CIPipelineStackCIPipelineSourcecheckoutfindywalletpwaCodePipelineActionRole5E6968AD",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "CIPipelineStackPWABucket8F8E04B7": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "BucketName": "agency.example.com",
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "WebsiteConfiguration": Object {
          "ErrorDocument": "index.html",
          "IndexDocument": "index.html",
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Delete",
    },
    "CIPipelineStackPWABucketPolicy878F064D": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "CIPipelineStackPWABucket8F8E04B7",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:GetObject*",
              "Effect": "Allow",
              "Principal": Object {
                "CanonicalUser": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackoriginaccessidentity05A5480B",
                    "S3CanonicalUserId",
                  ],
                },
              },
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    Object {
                      "Fn::GetAtt": Array [
                        "CIPipelineStackPWABucket8F8E04B7",
                        "Arn",
                      ],
                    },
                    "/*",
                  ],
                ],
              },
            },
            Object {
              "Action": "s3:ListBucket",
              "Effect": "Allow",
              "Principal": Object {
                "CanonicalUser": Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackoriginaccessidentity05A5480B",
                    "S3CanonicalUserId",
                  ],
                },
              },
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackPWABucket8F8E04B7",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "CIPipelineStackPWAPipelineBuild20706257": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "EnvironmentVariables": Array [
            Object {
              "Name": "REACT_APP_GQL_HOST",
              "Type": "PLAINTEXT",
              "Value": "agency.example.com",
            },
            Object {
              "Name": "REACT_APP_AUTH_HOST",
              "Type": "PLAINTEXT",
              "Value": "agency.example.com",
            },
            Object {
              "Name": "REACT_APP_HTTP_SCHEME",
              "Type": "PLAINTEXT",
              "Value": "https",
            },
            Object {
              "Name": "REACT_APP_WS_SCHEME",
              "Type": "PLAINTEXT",
              "Value": "wss",
            },
          ],
          "Image": "node:14.17.6-alpine3.13",
          "ImagePullCredentialsType": "SERVICE_ROLE",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "Name": "CIPipelineStackPWAPipelineBuild",
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "CIPipelineStackPWAPipelineBuildRole636BAD3A",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"build\\": {
      \\"commands\\": [
        \\"apk add bash\\",
        \\"npm ci\\",
        \\"npm run build\\"
      ]
    }
  },
  \\"artifacts\\": {
    \\"files\\": [
      \\"./build/**/*\\"
    ]
  }
}",
          "Type": "CODEPIPELINE",
        },
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "CIPipelineStackPWAPipelineBuildRole636BAD3A": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codebuild.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "CIPipelineStackPWAPipelineBuildRoleDefaultPolicy1C903106": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:us-east-1:123456789:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "CIPipelineStackPWAPipelineBuild20706257",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:us-east-1:123456789:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "CIPipelineStackPWAPipelineBuild20706257",
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "codebuild:CreateReportGroup",
                "codebuild:CreateReport",
                "codebuild:UpdateReport",
                "codebuild:BatchPutTestCases",
                "codebuild:BatchPutCodeCoverages",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codebuild:us-east-1:123456789:report-group/",
                    Object {
                      "Ref": "CIPipelineStackPWAPipelineBuild20706257",
                    },
                    "-*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "CIPipelineStackPWAPipelineBuildRoleDefaultPolicy1C903106",
        "Roles": Array [
          Object {
            "Ref": "CIPipelineStackPWAPipelineBuildRole636BAD3A",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "CIPipelineStackPWAPipelineDeploy9302B6C7": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:1.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "Name": "CIPipelineStackPWAPipelineDeploy",
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "CIPipelineStackPWAPipelineDeployRole3E6DE9E5",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": Object {
            "Fn::Join": Array [
              "",
              Array [
                "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"build\\": {
      \\"commands\\": [
        \\"V1=$(curl https://agency.example.com/version.txt || echo \\\\\\"0\\\\\\")\\",
        \\"V2=$(cat ./build/version.txt)\\",
        \\"if [ \\\\\\"$V1\\\\\\" != \\\\\\"$V2\\\\\\" ]; then aws s3 sync --delete ./build s3://",
                Object {
                  "Ref": "CIPipelineStackPWABucket8F8E04B7",
                },
                "; fi\\"
      ]
    }
  }
}",
              ],
            ],
          },
          "Type": "CODEPIPELINE",
        },
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "CIPipelineStackPWAPipelineDeployRole3E6DE9E5": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codebuild.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "CIPipelineStackPWAPipelineDeployRoleDefaultPolicy98E8E618": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:Put*",
                "s3:Delete*",
                "s3:Get*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "CIPipelineStackPWABucket8F8E04B7",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
                Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackPWABucket8F8E04B7",
                    "Arn",
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:us-east-1:123456789:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "CIPipelineStackPWAPipelineDeploy9302B6C7",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:us-east-1:123456789:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "CIPipelineStackPWAPipelineDeploy9302B6C7",
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "codebuild:CreateReportGroup",
                "codebuild:CreateReport",
                "codebuild:UpdateReport",
                "codebuild:BatchPutTestCases",
                "codebuild:BatchPutCodeCoverages",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codebuild:us-east-1:123456789:report-group/",
                    Object {
                      "Ref": "CIPipelineStackPWAPipelineDeploy9302B6C7",
                    },
                    "-*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "CIPipelineStackCIPipelineArtifactsBucketA5EE3009",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "CIPipelineStackCIPipelineArtifactsBucketEncryptionKey32793C34",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "CIPipelineStackPWAPipelineDeployRoleDefaultPolicy98E8E618",
        "Roles": Array [
          Object {
            "Ref": "CIPipelineStackPWAPipelineDeployRole3E6DE9E5",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "CIPipelineStackoriginaccessidentity05A5480B": Object {
      "Properties": Object {
        "CloudFrontOriginAccessIdentityConfig": Object {
          "Comment": "Access bucket agency.example.com only from Cloudfront",
        },
      },
      "Type": "AWS::CloudFront::CloudFrontOriginAccessIdentity",
    },
    "agent45A49129": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "ImageScanningConfiguration": Object {
          "ScanOnPush": true,
        },
        "LifecyclePolicy": Object {
          "LifecyclePolicyText": "{\\"rules\\":[{\\"rulePriority\\":1,\\"description\\":\\"Retain max 3 images\\",\\"selection\\":{\\"tagStatus\\":\\"any\\",\\"countType\\":\\"imageCountMoreThan\\",\\"countNumber\\":3},\\"action\\":{\\"type\\":\\"expire\\"}}]}",
        },
      },
      "Type": "AWS::ECR::Repository",
      "UpdateReplacePolicy": "Delete",
    },
    "auth6E544AA8": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "ImageScanningConfiguration": Object {
          "ScanOnPush": true,
        },
        "LifecyclePolicy": Object {
          "LifecyclePolicyText": "{\\"rules\\":[{\\"rulePriority\\":1,\\"description\\":\\"Retain max 3 images\\",\\"selection\\":{\\"tagStatus\\":\\"any\\",\\"countType\\":\\"imageCountMoreThan\\",\\"countNumber\\":3},\\"action\\":{\\"type\\":\\"expire\\"}}]}",
        },
      },
      "Type": "AWS::ECR::Repository",
      "UpdateReplacePolicy": "Delete",
    },
    "vaultAEB7ADF6": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "ImageScanningConfiguration": Object {
          "ScanOnPush": true,
        },
        "LifecyclePolicy": Object {
          "LifecyclePolicyText": "{\\"rules\\":[{\\"rulePriority\\":1,\\"description\\":\\"Retain max 3 images\\",\\"selection\\":{\\"tagStatus\\":\\"any\\",\\"countType\\":\\"imageCountMoreThan\\",\\"countNumber\\":3},\\"action\\":{\\"type\\":\\"expire\\"}}]}",
        },
      },
      "Type": "AWS::ECR::Repository",
      "UpdateReplacePolicy": "Delete",
    },
  },
}
`;
